# Allowance Cleaner API Environment Variables
# Copy this file to .env and fill in your API keys

# ============================================
# REQUIRED API KEYS
# ============================================

# Alchemy API Key (Required for RPC access)
# Get it from: https://alchemy.com
# Used for: Ethereum, Base, Polygon, Arbitrum, Optimism RPC access
# Free tier: 300M compute units/month
ALCHEMY_API_KEY=your_alchemy_api_key_here

# Etherscan API Key (Required - V2 works for ALL chains!)
# Get it from: https://etherscan.io/myapikey
# Used for: ALL blockchain data across 60+ chains
# Free tier: 5 calls/second, 100,000 calls/day
#
# IMPORTANT: Etherscan API V2 (August 2025+) uses a SINGLE API key for all chains!
# One key works for: Ethereum, Base, Polygon, Arbitrum, Optimism, BSC, Avalanche, and 50+ more chains
# No need for separate Basescan, Polygonscan, Arbiscan keys anymore!
#
# Reference: https://docs.etherscan.io/v2-migration
ETHERSCAN_API_KEY=your_etherscan_api_key_here

# ============================================
# LEGACY KEYS (NOT NEEDED FOR V2)
# ============================================

# These are no longer needed with Etherscan API V2
# If you have old keys, they won't work with V2
# Just use ETHERSCAN_API_KEY above for everything

# BASESCAN_API_KEY=  # ❌ Not needed - use ETHERSCAN_API_KEY
# POLYGONSCAN_API_KEY=  # ❌ Not needed - use ETHERSCAN_API_KEY
# ARBISCAN_API_KEY=  # ❌ Not needed - use ETHERSCAN_API_KEY
# OPTIMISTIC_ETHERSCAN_API_KEY=  # ❌ Not needed - use ETHERSCAN_API_KEY
# BSCSCAN_API_KEY=  # ❌ Not needed - use ETHERSCAN_API_KEY
# SNOWTRACE_API_KEY=  # ❌ Not needed - use ETHERSCAN_API_KEY

# ============================================
# API V2 FORMAT
# ============================================

# Old V1 format (deprecated):
# https://api.basescan.org/api?module=account&action=balance&...

# New V2 format (current):
# https://api.etherscan.io/v2/api?chainid=8453&module=account&action=balance&...
#
# The difference:
# - Single endpoint: api.etherscan.io/v2/api
# - Add chainid parameter (1=Ethereum, 8453=Base, 137=Polygon, etc.)
# - One API key for all chains

# ============================================
# RATE LIMIT CONFIGURATION
# ============================================

# Etherscan V2 rate limits (shared across all chains)
# Free tier: 5 calls/second
# Standard: 5 calls/second
# Advanced: 10 calls/second
# Professional: 15 calls/second

# For PRO plans, contact Etherscan to increase rate limits

# ============================================
# SUPPORTED CHAINS (with chainid)
# ============================================

# Ethereum Mainnet: chainid=1
# Base: chainid=8453
# Polygon: chainid=137
# Arbitrum One: chainid=42161
# Optimism: chainid=10
# BNB Smart Chain: chainid=56
# Avalanche: chainid=43114
# ... and 50+ more chains

# Full list: https://docs.etherscan.io/support/supported-chains

# ============================================
# NOTES
# ============================================

# 1. Getting Started (V2):
#    - Sign up at https://etherscan.io
#    - Create ONE API key in your dashboard
#    - Use that key for ALL chains
#    - Wait 5-10 minutes for activation

# 2. Migration from V1:
#    - If you have old Basescan/Polygonscan keys, they won't work
#    - Get a new Etherscan V2 key
#    - One key replaces all your old keys

# 3. API Key Security:
#    - NEVER commit .env files to version control
#    - Keep your API key private
#    - Rotate if exposed

# 4. Rate Limits:
#    - 5 calls/second on free tier
#    - Shared across ALL chains
#    - One call to Ethereum + one to Base = 2 calls total

# 5. Testing Your Key:
#    curl "https://api.etherscan.io/v2/api?chainid=1&module=account&action=balance&address=0xde0b295669a9fd93d5f28d9ec85e40f4cb697bae&tag=latest&apikey=YOUR_KEY"
#
#    Success: {"status":"1","message":"OK","result":"..."}
#    Failure: {"status":"0","message":"NOTOK","result":"Invalid API Key"}

# 6. Common Errors:
#    - "NOTOK" = Invalid key or not activated yet
#    - "deprecated V1 endpoint" = Using old API format
#    - "Missing or unsupported chainid" = Invalid chain ID
#    - "Free tier access not supported" = Chain requires paid plan

# 7. Cost Optimization:
#    - Alchemy: 300M compute units/month (generous)
#    - Etherscan: 100,000 calls/day on free tier
#    - Each scan: ~10-50 calls depending on wallet

# 8. Production Deployment:
#    - Vercel: Project Settings > Environment Variables
#    - Add ALCHEMY_API_KEY and ETHERSCAN_API_KEY
#    - Restart after adding

# 9. Benefits of V2:
#    ✅ One API key for 60+ chains
#    ✅ Simpler configuration
#    ✅ Unified endpoint
#    ✅ Better rate limiting
#    ✅ Future-proof

# 10. Reference Links:
#    - V2 Migration Guide: https://docs.etherscan.io/v2-migration
#    - API Documentation: https://docs.etherscan.io
#    - Supported Chains: https://docs.etherscan.io/support/supported-chains
#    - Rate Limits: https://docs.etherscan.io/support/rate-limits

